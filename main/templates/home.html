{% extends 'base/base.html' %}

{% block title %}HUG{% endblock %}

{% block content %}
<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/xy.js"></script>

<style>
#chartdiv {
  width: 50%;
  height: 250px;
}
</style>

<div id="chartdiv"></div>

<script>
// Create root and chart
var root = am5.Root.new("chartdiv");
var chart = root.container.children.push(
  am5xy.XYChart.new(root, {
      panX: false,
      panY: false,
      wheelX: "panX",
      wheelY: "zoomX",
      layout: root.verticalLayout
  })
);

// Craete Y-axis
var yAxis = chart.yAxes.push(
  am5xy.ValueAxis.new(root, {
    renderer: am5xy.AxisRendererY.new(root, {})
  })
);

// Create X-Axis
var xAxis = chart.xAxes.push(
  am5xy.CategoryAxis.new(root, {
    renderer: am5xy.AxisRendererX.new(root, {}),
    categoryField: "category"
  })
);

var xRenderer = xAxis.get("renderer");
xRenderer.labels.template.setAll({
  visible:false
});

// Create series
var series = chart.series.push(
  am5xy.ColumnSeries.new(root, {
    name: "Series",
    xAxis: xAxis,
    yAxis: yAxis,
    valueYField: "value",
    categoryXField: "category",
    tooltip: am5.Tooltip.new(root, {
    labelText: "{category}: {value}"
    })
  })
);

fetch("/grafica_dinamica6")
    .then(response => response.json())
    .then(data => {
      xAxis.data.setAll(data);
      series.data.setAll(data);
      console.log("ok");
    })
    .catch(error => console.error("Error al obtener los datos:", error));


// Add cursor
// https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/
var cursor = chart.set("cursor", am5xy.XYCursor.new(root, {
  behavior: "zoomX"
}));
cursor.lineY.set("visible", true);


</script>

{% endblock %}